function variation_manager(a){this.variations=a,this.find_matching_variation=function(a){var b,c,d,e;for(b=0;b<this.variations.length;b++){c=this.variations[b],d=!0;for(e in c.attributes)d=d&void 0!=a[e]&&a[e]==c.attributes[e];if(d)return c}for(b=0;b<this.variations.length;b++){c=this.variations[b],d=!0;for(e in c.attributes)d=d&void 0!=a[e]&&(a[e]==c.attributes[e]||""==c.attributes[e]);if(d)return c}return!1}}function variation_calculator(a,b,c,d,e,f){this.recalc_needed=!0,this.all_set_callback=d,this.not_all_set_callback=e,this.variation_keys=a,this.variations_map=f,this.variations_available=c,this.variations_current={},this.variations_selected={},this.reset_current=function(){var a,b;for(a in this.variation_keys)for(this.variations_current[a]={},b=0;b<this.variation_keys[a].length;b++)this.variations_current[a][this.variation_keys[a][b]]=0},this.update_current=function(){var a,b,c,d,e,f,g,h,i;for(this.reset_current(),a=0;a<this.variations_available.length;a++)for(b in this.variations_available[a])if(c=this.variations_available[a][b],d=this.variations_selected[b],d&&d==c)this.variations_current[b][c]=1;else{e=!0;for(f in this.variations_selected)f!=b&&(g=this.variations_selected[f],h=this.variations_available[a][f],g&&h&&g!=h&&(e=!1));if(e)if(c)this.variations_current[b][c]=1;else for(i in this.variations_current[b])this.variations_current[b][i]=1}this.recalc_needed=!1},this.get_current=function(){return this.recalc_needed&&this.update_current(),this.variations_current},this.get_value_is_current=function(a,b){return this.recalc_needed&&this.update_current(),this.variations_current[a][b]===!0},this.reset_selected=function(){this.recalc_needed=!0,this.variations_selected={}},this.set_selected=function(a,b){this.recalc_needed=!0,this.variations_selected[a]=b},this.get_selected=function(){return this.variations_selected},this.trigger_callbacks=function(){var c,a=!0;for(c in this.variation_keys)a=a&void 0!=this.variations_selected[c]&&""!=this.variations_selected[c];a?this.all_set_callback(this.variations_selected,b,this.variations_map):this.not_all_set_callback()}}jQuery(document).ready(function(a){function b(){var b=a("div.images img:eq(0)"),c=a("div.images a.zoom:eq(0)"),d=a(b).attr("data-o_src"),e=a(c).attr("data-o_href");d&&e&&(a(b).attr("src",d),a(c).attr("href",e)),a("form input[name=variation_id]").val("").change(),a(".single_variation_wrap").hide(),a(".single_variation").text(""),a("#variations_clear").hide(),a().uniform&&a.isFunction(a.uniform.update)&&a.uniform.update()}function c(b,c,e){var h,i,j,f=null,g="";for(sa in b)sa.indexOf("attribute")>-1&&(g=e[sa][b[sa]],a("#"+sa).val(g));for(h=0;h<c.length;h++){i=!0;for(attribute in c[h].attributes)for(selected_attribute in b)selected_attribute==attribute&&(j=c[h].attributes[attribute],j!=b[g]&&(i=!1));i&&(f=c[h])}if(!f)for(h=0;h<c.length;h++){i=!0;for(attribute in c[h].attributes)for(selected_attribute in b)selected_attribute==attribute&&(g=e[selected_attribute][b[selected_attribute]],j=c[h].attributes[attribute],b[selected_attribute],""!=j&&j!=g&&(i=!1));i&&(f=c[h])}f?(a("#variations_clear").show(),d(f)):a("#variations_clear").hide()}function d(b){e(b),a(".variations_button").show(),a(".single_variation").html(b.price_html+b.availability_html),b.sku?a(".product_meta").find(".sku").text(b.sku):a(".product_meta").find(".sku").text(""),a(".single_variation_wrap").find(".quantity").show(),b.min_qty?a(".single_variation_wrap").find("input[name=quantity]").attr("data-min",b.min_qty).val(b.min_qty):a(".single_variation_wrap").find("input[name=quantity]").removeAttr("data-min"),b.max_qty?a(".single_variation_wrap").find("input[name=quantity]").attr("data-max",b.max_qty):a(".single_variation_wrap").find("input[name=quantity]").removeAttr("data-max"),"yes"==b.is_sold_individually&&(a(".single_variation_wrap").find("input[name=quantity]").val("1"),a(".single_variation_wrap").find(".quantity").hide()),a("form input[name=variation_id]").val(b.variation_id).change(),a(".single_variation_wrap").slideDown("200").trigger("show_variation",[b]),a("form.cart").trigger("found_variation",[b])}function e(b){var c=a("div.images img:eq(0)"),d=a("div.images a.zoom:eq(0)"),e=a(c).attr("data-o_src"),f=a(c).attr("data-o_title"),g=a(d).attr("data-o_href"),h=b.image_src,i=b.image_link,j=b.image_title;e||a(c).attr("data-o_src",a(c).attr("src")),f||a(c).attr("data-o_title",a(c).attr("title")),g||a(d).attr("data-o_href",a(d).attr("href")),h&&h.length>1?(a(c).attr("src",h),a(c).attr("title",j),a(c).attr("alt",j),a(d).attr("href",i),a(d).attr("title",j)):(a(c).attr("src",e),a(c).attr("title",f),a(c).attr("alt",f),a(d).attr("href",g),a(d).attr("title",f))}function f(b){a(b).on("click","div.select-option",function(b){var c,d,e,f,g;return b.preventDefault(),c=a(this),c.hasClass("disabled")?!1:(c.hasClass("selected")?(c.removeClass("selected"),d=c.closest("div.select"),d.data("value",""),e="#"+a(d).attr("id")+"_label",f=a(e),f&&f.html("&nbsp;"),a(this).parents("div.select").trigger("change",[])):(d=a(this).closest("div.select"),a(d).find("div.select-option").removeClass("selected"),c.addClass("selected"),g=c.data("value"),d.data("value",g),e="#"+a(d).attr("id")+"_label",f=a(e),f&&f.text(c.data("name")),a(this).parents("div.select").trigger("change",[])),!1)}),a(b).on("change","div.select",function(){var b,c;$variation_form=a(this).closest("form.cart"),calculator=$variation_form.data("calculator"),$variation_form.trigger("woocommerce_variation_select_change"),b=a(this).closest(".variation_form_section"),a("select",b).each(function(b,c){var d=a(c).val();d=d.replace("'","&#039;"),d=d.replace('"',"&quot;"),calculator.set_selected(a(c).data("attribute-name"),d)}),a("div.select",b).each(function(b,c){var d=a(c).data("value");calculator.set_selected(a(c).data("attribute-name"),d)}),c=calculator.get_current(),a("select",b).each(function(b,d){var e=a(d).data("attribute-name"),f=c[e];a(d).find("option:gt(0)").each(function(b,c){var d=a(c).val();d=d.replace("'","&#039;"),d=d.replace('"',"&quot;"),f[d]?a(c).removeAttr("disabled"):a(c).attr("disabled","disabled")})}),a("div.select",b).each(function(b,d){var e=a(d).data("attribute-name"),f=c[e];a(d).find("div.select-option").each(function(b,c){f[a(c).data("value")]?a(c).removeClass("disabled"):a(c).addClass("disabled","disabled")})}),calculator.trigger_callbacks()}),a(b).on("change","select",function(){var b,c;$variation_form=a(this).closest("form.cart"),calculator=$variation_form.data("calculator"),b=a(this).closest(".variation_form_section"),a("select",b).each(function(b,c){var d=a(c).val();d=d.replace("'","&#039;"),d=d.replace('"',"&quot;"),calculator.set_selected(a(c).data("attribute-name"),d)}),c=calculator.get_current(),a("select",b).each(function(b,d){var e=a(d).data("attribute-name"),f=c[e];a(d).find("option:gt(0)").each(function(b,c){var d=a(c).val();d=d.replace("'","&#039;"),d=d.replace('"',"&quot;"),f[d]&&a(c).removeAttr("disabled")})}),a("div.select",b).each(function(b,d){var e=a(d).data("attribute-name"),f=c[e];a(d).find("div.select-option").each(function(b,c){f[a(c).data("value")]?a(c).removeClass("disabled"):a(c).addClass("disabled","disabled")})}),calculator.trigger_callbacks()})}a(document).on("wc_variation_form",function(d){var g,e=d.target;!a(e).data("bound")&&a(e).hasClass("swatches")&&(g=new variation_calculator(a(e).data("product_attributes"),a(e).data("product_variations"),a(e).data("product_variations_flat"),c,b,a(e).data("variations_map")),a(e).find(".variations select").unbind(),a(e).find("div.select, select").unbind(),a(e).data("calculator",g),f(e),g.reset_selected(),g.reset_current(),a("select",e).trigger("change",[]),a(e).find("div.select-option[data-default=true]").find("a").each(function(b,c){a(c).click()}),a(e).data("bound",1))}),a("#variations_clear").click(function(b){var c,d,e;return b.preventDefault(),a(this).closest("form.variations_form").find(".variations-table select").val("").change(),c=a(this).closest(".product").find(".sku"),d=a(this).closest(".product").find(".product_weight"),e=a(this).closest(".product").find(".product_dimensions"),c.attr("data-o_sku")&&c.text(c.attr("data-o_sku")),d.attr("data-o_weight")&&d.text(d.attr("data-o_weight")),e.attr("data-o_dimensions")&&e.text(e.attr("data-o_dimensions")),a(this).closest("form.variations_form").find("div.select").each(function(){a(this).find("div.select-option").each(function(){var b,c,d;a(this).hasClass("selected")&&(a(this).removeClass("selected"),b=a(this).closest("div.select"),b.data("value",""),b.trigger("change",[]),c="#"+a(b).attr("id")+"_label",d=a(c),d&&d.html("&nbsp;"))})}),!1})});